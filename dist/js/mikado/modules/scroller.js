"use strict";function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,n,t){return n&&e(o.prototype,n),t&&e(o,t),o}}(),Looper=function(){function e(){_classCallCheck(this,e),this.elements=[],this.lastPageYOffset=0,this.ticking=!1,window.looper=this,window.nextLoop=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},document.addEventListener("DOMContentLoaded",function(){looper.init()})}return _createClass(e,[{key:"doYScroll",value:function(){this.reveal()}},{key:"isPartiallyVisible",value:function(e){var o=e.getBoundingClientRect(),n=o.top,t=o.bottom,i=o.height;return n+i>=0&&i+window.innerHeight>=t}},{key:"isFullyVisible",value:function(e){var o=e.getBoundingClientRect(),n=o.top,t=o.bottom;return n>=0&&t<=window.innerHeight}},{key:"reveal",value:function(e){if(looper.elements.length>0)for(var o=looper.elements,n=0;n<o.length;n++){var t=o[n],i="full"==t.dataset.reveal?"isFullyVisible":"isPartiallyVisible";looper[i](t)?t.classList.add("element-visible"):t.classList.remove("element-visible")}}},{key:"loop",value:function(){var e=looper.lastPageYOffset;e!==window.pageYOffset?(looper.doYScroll(),nextLoop(looper.loop)):looper.ticking=!1}},{key:"runScroll",value:function(e){console.log("scrolling"),looper.ticking||(looper.lastPageYOffset=window.pageYOffset,looper.loop()),looper.ticking=!0}},{key:"init",value:function(){this.elements=document.querySelectorAll("[data-reveal]"),window.addEventListener("scroll",this.runScroll,!1),looper.doYScroll()}}]),e}();new Looper;