"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),Mikado=function(){function e(){_classCallCheck(this,e),this.w=window,this.doc=document,this.html=this.doc.documentElement,this.polyfillReady=!1,this.systemReady=!1;var t=void 0,o={module_url:"dist/js/mikado/modules/",vendor_url:"dist/js/vendor/",dev:!1},n=window.mikadoConfig||{};for(t in o)t in n||(n[t]=o[t]);this.config=n;var i=this;this.doc.addEventListener("polyfillReady",function(){i.polyfillReady=!0}),this.doc.addEventListener("DOMContentLoaded",function(){Base.logger("Window Loaded: loading enhancers..."),i.initMenuToggle(),i.loadEnhancers()}),this.doc.addEventListener("systemReady",function(){i.systemReady=!0})}return _createClass(e,[{key:"toggleMenu",value:function(e){e.preventDefault();var t="togglerTarget"in this.dataset?document.querySelectorAll(this.dataset.togglerTarget):[this],o=this.dataset.toggler?this.dataset.toggler:"toggler-toggl";Base.forEach(t,function(e,t){t&&t.className.indexOf(o+"ed")>-1?(t.classList.add(o+"ing"),t.classList.remove(o+"ed"),setTimeout(function(){t.classList.remove(o+"ing")},300)):t&&t.classList.add(o+"ed")})}},{key:"dismissMenu",value:function(e){document.querySelector("[data-toggler-target]").classList.remove(e+"ed")}},{key:"initMenuToggle",value:function(){var e=document.querySelectorAll("[data-toggler]"),t=this;Base.forEach(e,function(e,o){var n=o.dataset.toggler?o.dataset.toggler:"toggler-toggl",i="togglerDismiss"in o.dataset&&document.querySelectorAll(o.dataset.togglerDismiss);o.addEventListener("click",t.toggleMenu),i&&Base.forEach(i,function(e,o){o.addEventListener("click",t.dismissMenu(n))})})}},{key:"moduleURL",value:function(e){var t=window.mikadoConfig||{module_url:"dist/js/mikado/modules/"};return t.module_url+e}},{key:"loadSystemJs",value:function(){e.loadConditionalGlobal("body","System",this.moduleURL("system.min.js"),function(){var e=window.systemConfig||{};SystemJS.config(e),Base.triggerEvent("systemReady")})}},{key:"loadLazySizes",value:function(){var t=!1;document.querySelector("[data-bg]")?(e.loadConditionalGlobal("[data-bg]","unveilhooks",mikado.moduleURL("ls.unveilhooks.min.js"),function(){Base.triggerEvent("loadLazySizes")},null),t=!1):t=!0,document.addEventListener("loadLazySizes",function(){window.lazySizesConfig=window.lazySizesConfig||{};var t="lazyClass"in window.lazySizesConfig?window.lazySizesConfig.lazyClass:".lazyload";e.loadConditionalGlobal(t,"lazysizes",mikado.moduleURL("lazysizes.min.js"),function(){},"lazySizes")}),t&&Base.triggerEvent("loadLazySizes")}},{key:"loadEnhancers",value:function(){this.loadSystemJs(),e.loadConditionalGlobal("form","validate",this.moduleURL("validate.min.js")),this.loadLazySizes()}}],[{key:"loadConditionalImport",value:function(e,t,o){if(document.querySelector(e))return"System"in window?System["import"](t).then(o):(document.addEventListener("systemReady",function(){System["import"](t).then(o)}),!1)}},{key:"loadConditionalGlobal",value:function(e,t,o,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(n=n||function(){},document.querySelector(e)){var a="script#"+t;document.querySelector(a)?i in window?n.call():document.querySelector(a).addEventListener("load",function(){n.call()}):Base.loadScript(o,n,t)}}}]),e}(),mikado=new Mikado;